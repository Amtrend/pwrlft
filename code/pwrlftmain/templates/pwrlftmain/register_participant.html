{% extends 'base.html' %}
{% load static %}
{% block title %}Страница регистрации участника{% endblock %}
{% block content %}
    {% load formatnuminput %}
    <div class="competition_entry">
        <p class="competition_entry-title">{{ cur_competition.title }}</p>
        <p class="competition_entry-form_title">Редактирование заявки на участие в соревнованиях</p>
        <p class="competition_entry-form_subtitle">(поля, помеченные <sup>*</sup>, обязательны для заполнения)</p>
        <form action="{% url 'register_participant' cur_competition.competition_slug competitor.id %}" method="post" id="competition_registry-form" class="competition_entry-form">
            {% csrf_token %}
            <div class="competition_entry-form_sur">
                <label for="competition_registry-form_flow" class="competition_entry-form_sur-label">Поток</label>
                <select name="competition_registry-form_flow" class="competition_entry-form_wcat" id="competition_registry-form_flow">
                    <option value="Поток">Поток</option>
                    <option value="1 поток" {% if cur_comp_protocol %}{% if cur_comp_protocol.competitor_stream == '1 поток' %}selected{% endif %}{% endif %}>1</option>
                    <option value="2 поток" {% if cur_comp_protocol %}{% if cur_comp_protocol.competitor_stream == '2 поток' %}selected{% endif %}{% endif %}>2</option>
                    <option value="3 поток" {% if cur_comp_protocol %}{% if cur_comp_protocol.competitor_stream == '3 поток' %}selected{% endif %}{% endif %}>3</option>
                    <option value="4 поток" {% if cur_comp_protocol %}{% if cur_comp_protocol.competitor_stream == '4 поток' %}selected{% endif %}{% endif %}>4</option>
                    <option value="5 поток" {% if cur_comp_protocol %}{% if cur_comp_protocol.competitor_stream == '5 поток' %}selected{% endif %}{% endif %}>5</option>
                    <option value="6 поток" {% if cur_comp_protocol %}{% if cur_comp_protocol.competitor_stream == '6 поток' %}selected{% endif %}{% endif %}>6</option>
                    <option value="7 поток" {% if cur_comp_protocol %}{% if cur_comp_protocol.competitor_stream == '7 поток' %}selected{% endif %}{% endif %}>7</option>
                    <option value="8 поток" {% if cur_comp_protocol %}{% if cur_comp_protocol.competitor_stream == '8 поток' %}selected{% endif %}{% endif %}>8</option>
                    <option value="9 поток" {% if cur_comp_protocol %}{% if cur_comp_protocol.competitor_stream == '9 поток' %}selected{% endif %}{% endif %}>9</option>
                    <option value="10 поток" {% if cur_comp_protocol %}{% if cur_comp_protocol.competitor_stream == '10 поток' %}selected{% endif %}{% endif %}>10</option>
                </select>
            </div>
            <div class="competition_entry-form_gender">
                <p class="competition_entry-form_gender-title">Пол <sup>*</sup></p>
                <div class="competition_entry-form_gender-block">
                    <input type="radio" class="competition_entry-form_gender-input" id="competition_registry-form_gender-male" name="competition_entry-form_gender" value="competition_registry-form_gender-male"{% if competitor.gender == 'Мужской' %} checked{% endif %}>
                    <label for="competition_registry-form_gender-male" class="competition_entry-form_gender-label">Мужской</label>
                    <input type="radio" class="competition_entry-form_gender-input competition_entry-form_gender-input-fem" id="competition_registry-form_gender-female" name="competition_entry-form_gender" value="competition_registry-form_gender-female"{% if competitor.gender == 'Женский' %} checked{% endif %}>
                    <label for="competition_registry-form_gender-female" class="competition_entry-form_gender-label">Женский</label>
                </div>
            </div>
            <div class="competition_entry-form_sur">
                <label for="competition_registry-form_sur-input" class="competition_entry-form_sur-label">Фамилия <sup>*</sup></label>
                <input type="text" class="competition_entry-form_sur-input" id="competition_registry-form_sur-input" name="competition_registry-form_sur-input" placeholder="{{ competitor.surname_comp }}" value="{{ competitor.surname_comp }}" required>
            </div>
            <div class="competition_entry-form_sur">
                <label for="competition_registry-form_name-input" class="competition_entry-form_sur-label">Имя <sup>*</sup></label>
                <input type="text" class="competition_entry-form_sur-input" id="competition_registry-form_name-input" name="competition_registry-form_name-input" placeholder="{{ competitor.name_comp }}" value="{{ competitor.name_comp }}" required>
            </div>
            <div class="competition_entry-form_sur">
                <label for="competition_registry-form_patr-input" class="competition_entry-form_sur-label">Отчество <sup>*</sup></label>
                <input type="text" class="competition_entry-form_sur-input" id="competition_registry-form_patr-input" name="competition_registry-form_patr-input" placeholder="{{ competitor.patronymic_comp }}" value="{{ competitor.patronymic_comp }}" required>
            </div>
            <div class="competition_entry-form_sur">
                <label for="competition_registry-form_birthday-input" class="competition_entry-form_sur-label">Дата рождения <sup>*</sup></label>
                <input type="date" class="competition_entry-form_birthday-input" id="competition_registry-form_birthday-input" name="competition_registry-form_birthday-input" value="{{ competitor.birthday|date:'Y-m-d' }}" placeholder="{{ competitor.birthday|date:'Y-m-d' }}" required>
            </div>
            <div class="competition_entry-form_sur">
                <label for="competition_registry-form_wcat-m" id="competition_registry-form_wcat-m-label" class="competition_entry-form_sur-label" {% if competitor.gender == 'Мужской' %}style="display: block;"{% else %}style="display: none;"{% endif %}>Весовая категория <sup>*</sup></label>
                <select name="competition_registry-form_wcat-m" class="competition_entry-form_wcat" id="competition_registry-form_wcat-m" {% if competitor.gender == 'Мужской' %}style="display: block;"{% else %}style="display: none;"{% endif %}>
                    <option value="53" {% if competitor.weight_cat == '53' %}selected{% endif %}>53</option>
                    <option value="59" {% if competitor.weight_cat == '59' %}selected{% endif %}>59</option>
                    <option value="66" {% if competitor.weight_cat == '66' %}selected{% endif %}>66</option>
                    <option value="74" {% if competitor.weight_cat == '74' %}selected{% endif %}>74</option>
                    <option value="83" {% if competitor.weight_cat == '83' %}selected{% endif %}>83</option>
                    <option value="93" {% if competitor.weight_cat == '93' %}selected{% endif %}>93</option>
                    <option value="105" {% if competitor.weight_cat == '105' %}selected{% endif %}>105</option>
                    <option value="120" {% if competitor.weight_cat == '120' %}selected{% endif %}>120</option>
                    <option value="120+" {% if competitor.weight_cat == '120+' %}selected{% endif %}>120+</option>
                </select>
                <label for="competition_registry-form_wcat-f" id="competition_registry-form_wcat-f-label" class="competition_entry-form_sur-label" {% if competitor.gender == 'Женский' %}style="display: block;"{% else %}style="display: none;"{% endif %}>Весовая категория <sup>*</sup></label>
                <select name="competition_registry-form_wcat-f" class="competition_entry-form_wcat" id="competition_registry-form_wcat-f" {% if competitor.gender == 'Женский' %}style="display: block;"{% else %}style="display: none;"{% endif %}>
                    <option value="43" {% if competitor.weight_cat == '43' %}selected{% endif %}>43</option>
                    <option value="47" {% if competitor.weight_cat == '47' %}selected{% endif %}>47</option>
                    <option value="52" {% if competitor.weight_cat == '52' %}selected{% endif %}>52</option>
                    <option value="57" {% if competitor.weight_cat == '57' %}selected{% endif %}>57</option>
                    <option value="63" {% if competitor.weight_cat == '63' %}selected{% endif %}>63</option>
                    <option value="69" {% if competitor.weight_cat == '69' %}selected{% endif %}>69</option>
                    <option value="76" {% if competitor.weight_cat == '76' %}selected{% endif %}>76</option>
                    <option value="84" {% if competitor.weight_cat == '84' %}selected{% endif %}>84</option>
                    <option value="84+" {% if competitor.weight_cat == '84+' %}selected{% endif %}>84+</option>
                </select>
            </div>
            <div class="competition_entry-form_sur">
                <label for="competition_registry-form_sp-cat" class="competition_entry-form_sur-label">Спортивный разряд</label>
                <select name="competition_registry-form_sp-cat" class="competition_entry-form_wcat" id="competition_registry-form_sp-cat">
                    <option value="Без разряда" {% if competitor.sports_cat == 'Без разряда' %}selected{% endif %}>Без разряда</option>
                    <option value="III юношеский" {% if competitor.sports_cat == 'III юношеский' %}selected{% endif %}>III юношеский</option>
                    <option value="II юношеский" {% if competitor.sports_cat == 'II юношеский' %}selected{% endif %}>II юношеский</option>
                    <option value="I юношеский" {% if competitor.sports_cat == 'I юношеский' %}selected{% endif %}>I юношеский</option>
                    <option value="III взрослый" {% if competitor.sports_cat == 'III взрослый' %}selected{% endif %}>III взрослый</option>
                    <option value="II взрослый" {% if competitor.sports_cat == 'II взрослый' %}selected{% endif %}>II взрослый</option>
                    <option value="I взрослый" {% if competitor.sports_cat == 'I взрослый' %}selected{% endif %}>I взрослый</option>
                    <option value="КМС" {% if competitor.sports_cat == 'КМС' %}selected{% endif %}>КМС</option>
                    <option value="МС" {% if competitor.sports_cat == 'МС' %}selected{% endif %}>МС</option>
                    <option value="МСМК" {% if competitor.sports_cat == 'МСМК' %}selected{% endif %}>МСМК</option>
                </select>
            </div>
            <div class="competition_entry-form_sur">
                <p class="competition_entry-form_sur-label">Спортивная дисциплина <sup>*</sup></p>
                <div class="competition_entry-form_sp-t_block">
                    {% for st in cur_competition.sport_types.all %}
                        <div class="competition_entry-form_sp-t_block_chck">
                            <input type="checkbox" name="competition_registry-form_sp-t_chckbx" class="competition_entry-form_sp-t_chckbx competition_registry-form_sp-t_chckbx" id="competition_registry-form_sp-t_chckbx-{{ st.id }}" value="{{ st.title }}"
                                    {% for comp_s_t in competitor.sports_type.all %}
                                        {% if comp_s_t.title == st.title %}
                                   checked
                                        {% endif %}
                                    {% endfor %}>
                            <label for="competition_registry-form_sp-t_chckbx-{{ st.id }}" class="competition_entry-form_sur-label competition_entry-form_sur-label-chck">{{ st.title }}</label>
                        </div>
                    {% endfor %}
                </div>
            </div>
            <div class="competition_entry-form_sur competition_entry-form_sur-pwlekip" {% for comp_s_t in competitor.sports_type.all %}{% if comp_s_t.title == 'Троеборье (экип.)' %}style="display: flex;" {% endif %}{% endfor %}>
                <label for="competition_registry-form_pwlekip-input" class="competition_entry-form_sur-label">Лучший результат в троеборье (экип.)</label>
                <input type="number" class="competition_entry-form_sur-input" id="competition_registry-form_pwlekip-input" name="competition_registry-form_pwlekip-input" min="0" step="0.01" max="9999" placeholder="{% if competitor.best_res_pwlft_ek %}{{ competitor.best_res_pwlft_ek }}{% else %}0.00{% endif %}" value="{% if competitor.best_res_pwlft_ek %}{{ competitor.best_res_pwlft_ek|formatnuminput }}{% else %}0.00{% endif %}">
            </div>
            <div class="competition_entry-form_sur competition_entry-form_sur-pwlclass" {% for comp_s_t in competitor.sports_type.all %}{% if comp_s_t.title == 'Троеборье классическое' %}style="display: flex;" {% endif %}{% endfor %}>
                <label for="competition_registry-form_pwlclass-input" class="competition_entry-form_sur-label">Лучший результат в троеборье классическом</label>
                <input type="number" class="competition_entry-form_sur-input" id="competition_registry-form_pwlclass-input" name="competition_registry-form_pwlclass-input" min="0" step="0.01" max="9999" placeholder="{% if competitor.best_res_pwlft_cl %}{{ competitor.best_res_pwlft_cl }}{% else %}0.00{% endif %}" value="{% if competitor.best_res_pwlft_cl %}{{ competitor.best_res_pwlft_cl|formatnuminput }}{% else %}0.00{% endif %}">
            </div>
            <div class="competition_entry-form_sur competition_entry-form_sur-bpekip" {% for comp_s_t in competitor.sports_type.all %}{% if comp_s_t.title == 'Жим лёжа (экип.)' %}style="display: flex;" {% endif %}{% endfor %}>
                <label for="competition_registry-form_bpekip-input" class="competition_entry-form_sur-label">Лучший результат в жиме лёжа (экип.)</label>
                <input type="number" class="competition_entry-form_sur-input" id="competition_registry-form_bpekip-input" name="competition_registry-form_bpekip-input" min="0" step="0.01" max="999" placeholder="{% if competitor.best_res_bpress_ek %}{{ competitor.best_res_bpress_ek }}{% else %}0.00{% endif %}" value="{% if competitor.best_res_bpress_ek %}{{ competitor.best_res_bpress_ek|formatnuminput }}{% else %}0.00{% endif %}">
            </div>
            <div class="competition_entry-form_sur competition_entry-form_sur-bp" {% for comp_s_t in competitor.sports_type.all %}{% if comp_s_t.title == 'Жим лёжа (без экип.)' %}style="display: flex;" {% endif %}{% endfor %}>
                <label for="competition_registry-form_bp-input" class="competition_entry-form_sur-label">Лучший результат в жиме лёжа (без экип.)</label>
                <input type="number" class="competition_entry-form_sur-input" id="competition_registry-form_bp-input" name="competition_registry-form_bp-input" min="0" step="0.01" max="999" placeholder="{% if competitor.best_res_bpress_cl %}{{ competitor.best_res_bpress_cl }}{% else %}0.00{% endif %}" value="{% if competitor.best_res_bpress_cl %}{{ competitor.best_res_bpress_cl|formatnuminput }}{% else %}0.00{% endif %}">
            </div>
            <div class="competition_entry-form_sur">
                <label for="competition_registry-form_sur-trn-input" class="competition_entry-form_sur-label">Фамилия тренера</label>
                <input type="text" class="competition_entry-form_sur-input" id="competition_registry-form_sur-trn-input" name="competition_registry-form_sur-trn-input" placeholder="{% if competitor.surname_trainer %}{{ competitor.surname_trainer }}{% endif %}" value="{% if competitor.surname_trainer %}{{ competitor.surname_trainer }}{% endif %}">
            </div>
            <div class="competition_entry-form_sur">
                <label for="competition_registry-form_name-trn-input" class="competition_entry-form_sur-label">Имя тренера</label>
                <input type="text" class="competition_entry-form_sur-input" id="competition_registry-form_name-trn-input" name="competition_registry-form_name-trn-input" placeholder="{% if competitor.name_trainer %}{{ competitor.name_trainer }}{% endif %}" value="{% if competitor.name_trainer %}{{ competitor.name_trainer }}{% endif %}">
            </div>
            <div class="competition_entry-form_sur">
                <label for="competition_registry-form_patr-trn-input" class="competition_entry-form_sur-label">Отчество тренера</label>
                <input type="text" class="competition_entry-form_sur-input" id="competition_registry-form_patr-trn-input" name="competition_registry-form_patr-trn-input" placeholder="{% if competitor.patronymic_trainer %}{{ competitor.patronymic_trainer }}{% endif %}" value="{% if competitor.patronymic_trainer %}{{ competitor.patronymic_trainer }}{% endif %}">
            </div>
            <div class="competition_entry-form_sur">
                <label for="competition_registry-form_club-input" class="competition_entry-form_sur-label">Название спортивного клуба</label>
                <input type="text" class="competition_entry-form_sur-input" id="competition_registry-form_club-input" name="competition_registry-form_club-input" placeholder="{% if competitor.club %}{{ competitor.club }}{% endif %}" value="{% if competitor.club %}{{ competitor.club }}{% endif %}">
            </div>
            <div class="competition_entry-form_sur">
                <label for="competition_registry-form_phone-input" class="competition_entry-form_sur-label">Номер телефона</label>
                <input type="tel" class="competition_entry-form_sur-input" id="competition_registry-form_phone-input" name="competition_registry-form_phone-input" placeholder="{% if competitor.phone %}{{ competitor.phone }}{% endif %}" value="{% if competitor.phone %}{{ competitor.phone }}{% endif %}">
            </div>
            <div class="competition_entry-form_sur">
                <label for="competition_registry-form_mail-input" class="competition_entry-form_sur-label">Адрес эл.почты</label>
                <input type="email" class="competition_entry-form_sur-input" id="competition_registry-form_mail-input" name="competition_registry-form_mail-input" placeholder="{% if competitor.mail %}{{ competitor.mail }}{% endif %}" value="{% if competitor.mail %}{{ competitor.mail }}{% endif %}">
            </div>
            <div class="competition_entry-form_sur">
                <label for="competition_registry-form_w-weight" class="competition_entry-form_sur-label">Вес на взвешивнии</label>
                <input type="number" class="competition_entry-form_sur-input" id="competition_registry-form_w-weight" name="competition_registry-form_w-weight" min="0" step="0.01" max="9999" placeholder="{% if cur_comp_protocol %}{{ cur_comp_protocol.competitor_weight }}{% else %}0.00{% endif %}" value="{% if cur_comp_protocol %}{{ cur_comp_protocol.competitor_weight|formatnuminput }}{% else %}0.00{% endif %}">
            </div>
            <div class="competition_entry-form_sur competition_registry-form_squat" {% for comp_s_t in competitor.sports_type.all %}{% if comp_s_t.title == 'Троеборье (экип.)' %}style="display: flex;"{% elif comp_s_t.title == 'Троеборье классическое' %}style="display: flex;"{% endif %}{% endfor %}>
                <label for="competition_registry-form_squat" class="competition_entry-form_sur-label">Первый подход Присед</label>
                <input type="number" class="competition_entry-form_sur-input" id="competition_registry-form_squat" name="competition_registry-form_squat" min="0" step="0.01" max="9999"
                       placeholder="{% if cur_comp_protocol %}{% if cur_comp_protocol.first_attempt_squat_res %}{{ cur_comp_protocol.first_attempt_squat_res }}{% elif cur_comp_protocol.first_attempt_squat_res_ek %}{{ cur_comp_protocol.first_attempt_squat_res_ek }}{% else %}0.00{% endif %}{% else %}0.00{% endif %}"
                       value="{% if cur_comp_protocol %}{% if cur_comp_protocol.first_attempt_squat_res %}{{ cur_comp_protocol.first_attempt_squat_res|formatnuminput }}{% elif cur_comp_protocol.first_attempt_squat_res_ek %}{{ cur_comp_protocol.first_attempt_squat_res_ek|formatnuminput }}{% else %}0.00{% endif %}{% else %}0.00{% endif %}">
            </div>
            <div class="competition_entry-form_sur competition_registry-form_bpress" {% for comp_s_t in competitor.sports_type.all %}{% if comp_s_t.title == 'Троеборье (экип.)' %}style="display: flex;"{% elif comp_s_t.title == 'Троеборье классическое' %}style="display: flex;"{% elif comp_s_t.title == 'Жим лёжа (экип.)' %}style="display: flex;"{% elif comp_s_t.title == 'Жим лёжа (без экип.)' %}style="display: flex;"{% endif %}{% endfor %}>
                <label for="competition_registry-form_bpress" class="competition_entry-form_sur-label">Первый подход Жим</label>
                <input type="number" class="competition_entry-form_sur-input" id="competition_registry-form_bpress" name="competition_registry-form_bpress" min="0" step="0.01" max="9999"
                       placeholder="{% if cur_comp_protocol %}{% if cur_comp_protocol.first_attempt_bpress_res %}{{ cur_comp_protocol.first_attempt_bpress_res }}{% elif cur_comp_protocol.first_attempt_bpress_res_ek %}{{ cur_comp_protocol.first_attempt_bpress_res_ek }}{% else %}0.00{% endif %}{% else %}0.00{% endif %}"
                       value="{% if cur_comp_protocol %}{% if cur_comp_protocol.first_attempt_bpress_res %}{{ cur_comp_protocol.first_attempt_bpress_res|formatnuminput }}{% elif cur_comp_protocol.first_attempt_bpress_res_ek %}{{ cur_comp_protocol.first_attempt_bpress_res_ek|formatnuminput }}{% else %}0.00{% endif %}{% else %}0.00{% endif %}">
            </div>
            <div class="competition_entry-form_sur competition_registry-form_dlift" {% for comp_s_t in competitor.sports_type.all %}{% if comp_s_t.title == 'Троеборье (экип.)' %}style="display: flex;"{% elif comp_s_t.title == 'Троеборье классическое' %}style="display: flex;"{% endif %}{% endfor %}>
                <label for="competition_registry-form_dlift" class="competition_entry-form_sur-label">Первый подход Тяга</label>
                <input type="number" class="competition_entry-form_sur-input" id="competition_registry-form_dlift" name="competition_registry-form_dlift" min="0" step="0.01" max="9999"
                       placeholder="{% if cur_comp_protocol %}{% if cur_comp_protocol.first_attempt_dlift_res %}{{ cur_comp_protocol.first_attempt_dlift_res }}{% elif cur_comp_protocol.first_attempt_dlift_res_ek %}{{ cur_comp_protocol.first_attempt_dlift_res_ek }}{% else %}0.00{% endif %}{% else %}0.00{% endif %}"
                       value="{% if cur_comp_protocol %}{% if cur_comp_protocol.first_attempt_dlift_res %}{{ cur_comp_protocol.first_attempt_dlift_res|formatnuminput }}{% elif cur_comp_protocol.first_attempt_dlift_res_ek %}{{ cur_comp_protocol.first_attempt_dlift_res_ek|formatnuminput }}{% else %}0.00{% endif %}{% else %}0.00{% endif %}">
            </div>
            <div class="competition_registry-form_send">
                <input type="submit" id="competition_registry-form_btn" name="competition_registry-form_btn" class="competition_entry-form_btn" value="Сохранить">
                <input type="button" id="competition_registry-form_del" name="competition_registry-form_del" class="competition_entry-form_del" value="Удалить">
            </div>
        </form>
    </div>
    <div class="modal_are-u-sure" id="reg-participant-modal_aus">
        <div class="modal_are-u-sure_content">
            <span class="modal_are-u-sure_close" id="reg-participant-modal_aus_close">&times;</span>
            <p class="modal_are-u-sure-text" id="reg-participant-modal_aus-text"></p>
            <div class="modal_are-u-sure-btns">
                <button type="button" class="modal_are-u-sure_yes" id="reg-participant-modal_aus_yes">Да</button>
                <button type="button" class="modal_are-u-sure_no" id="reg-participant-modal_aus_no">Нет</button>
            </div>
        </div>
    </div>
    <input type="hidden" id="comp_name" value="{{ competition_slug }}">
{% endblock %}